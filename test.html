<!DOCTYPE html>
<html>

<head>
    <style>
        body {
            margin: 20px;
            padding: 0;
        }
        #dpr {
            margin: 0 0 20px 0;
            font-size: 0.5rem;
        }
        .btn {
            width: 450px;
            padding: 5px;
            height: 1rem;
            border: 1px solid red;
            margin: 0 0 20px 0;
            font-size: 0.3rem;
        }
    </style>
</head>

<body>
    <div id="dpr"></div>
    <div class="btn">设置initial-scale实现的1物理像素边框</div>
    <div class="btn" id="btn2">不设置initial-scale的1px边框，实际宽度是1*dpr物理像素</div>
    <script>
        var win = window;
        var doc = win.document;
        var docEl = doc.documentElement;
        var scale = 0;
        var tid = null;
        var devicePixelRatio = win.devicePixelRatio;
        scale = 1 / 2;
        var metaEl = doc.createElement('meta');
        metaEl.setAttribute('name', 'viewport');
        metaEl.setAttribute('content', 'width=900, initial-scale=' + scale + ', maximum-scale=' + scale + ', minimum-scale=' + scale + ', user-scalable=no');
        if (docEl.firstElementChild) {
            docEl.firstElementChild.appendChild(metaEl);
        } else {
            var wrap = doc.createElement('div');
            wrap.appendChild(metaEl);
            doc.write(wrap.innerHTML);
        }

        function refreshRem() {
            var width = docEl.clientWidth;
            var rem = width / 10;
            docEl.style.fontSize = rem + 'px';
        }

        win.addEventListener('resize', function () {
            clearTimeout(tid);
            tid = setTimeout(refreshRem, 300);
        }, false);
        win.addEventListener('pageshow', function (e) {
            if (e.persisted) {
                clearTimeout(tid);
                tid = setTimeout(refreshRem, 300);
            }
        }, false);

        refreshRem();

        doc.getElementById('btn2').style.border = devicePixelRatio + 'px solid red';
        doc.getElementById('dpr').innerHTML = '当前设备dpr：' + devicePixelRatio;
    </script>
</body>

</html>